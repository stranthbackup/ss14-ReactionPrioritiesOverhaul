# Okay so my general thought is this:
# 1. Generate the large mass
# 2. Generate smaller masses offset
# 3. Generate N normal dungeons around the larger mass, preferably near the border
# 4. Generate large paths / small paths around the place
# 5. Spawn ores + fill the rest and the normal stuff

- type: dungeonConfig
  id: VGRoid
  layers:
    - !type:PrototypeDunGen
      proto: VGRoidBlob
    - !type:PrototypeDunGen
      proto: VGRoidExteriorDungeons
    #- !type:PrototypeDunGen
    #  proto: VGRoidSmaller
    #- VGRoidInteriorDungeons
    #- !type:PrototypeDunGen
    #  proto: VGRoidLargePaths
    #- VGRoidSmallPaths
    #- VGRoidOres
    #- VGRoidFill

# Configs
- type: dungeonConfig
  id: VGRoidBlob
  layers:
  - !type:NoiseDistanceDunGen
    size: 384, 384
    distanceConfig: !type:DunGenEuclideanSquaredDistance
      blendWeight: 0.80
    layers:
    - tile: FloorAsteroidSand
      threshold: 0.50
      noise:
        frequency: 0.010
        noiseType: OpenSimplex2
        fractalType: FBm
        octaves: 5
        lacunarity: 2
        gain: 0.5

- type: dungeonConfig
  id: VGRoidSmaller
  minOffset: 100
  maxOffset: 150
  layers:
  - !type:NoiseDistanceDunGen
    size: 256, 256
    distanceConfig: !type:DunGenEuclideanSquaredDistance
    layers:
    - tile: FloorAsteroidSand
      threshold: 0.50
      noise:
        frequency: 0.040
        noiseType: OpenSimplex2
        fractalType: FBm
        octaves: 5
        lacunarity: 1.5
        gain: 0.5

- type: dungeonConfig
  id: VGRoidExteriorDungeons
  minCount: 1
  maxCount: 3
  reserveTiles: true
  layers:
  - !type:ExteriorDunGen
    proto: Experiment
  # TODO:
  # Need to cleanup dungeon initialisation a bit
  # Need to make sure alltiles is accurate.
  # Need a way to reserve tiles so dungeons don't overlap.
  # - Need a thing to run it N times
  # - Need a config to place it on the grid exterior
  # Need a way to share snowylabs shit with the base dungeon
  # Maybe put a thing on dungeonconfigprototype for tile configs / decal configs
  # Maybe make postgen actually dungens?


#- type: dungeonConfig
#  id: VGRoidInteriorDungeons
#  minCount: 3
#  maxCount: 5
#  # Just randomly spawn these in bounds, doesn't really matter if they go out.
#
#- type: dungeonConfig
#  id: VGRoidLargePaths
#  reserveTiles: true
#  layers:
#  - !type:ReplaceTileDunGen
#    layers:
#    - tile: FloorAsteroidSand
#      threshold: 0.70
#      noise:
#        frequency: 0.010
#        noiseType: Perlin
#        fractalType: Ridged
#        octaves: 2
#        gain: 2.0

#
#- type: dungeonConfig
#  id: VGRoidSmallPaths
#
#- type: dungeonConfig
#  id: VGRoidOres

- type: dungeonConfig
  id: VGRoidFill
  layers:
  - !type:FillGridDunGen
    proto: AsteroidRock
